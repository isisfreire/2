/*! For license information please see main.d7e7565b.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://5ac9dfe6-fed2-47fd-9871-81f310bc98b7.preview.emergentagent.com","/api");const At=function(){const[e,t]=(0,a.useState)({batch_id:"",shed_number:"",handler_name:"",initial_chicks:"",chick_cost_per_unit:"",pre_starter_consumption:"",pre_starter_cost_per_kg:"",starter_consumption:"",starter_cost_per_kg:"",growth_consumption:"",growth_cost_per_kg:"",final_consumption:"",final_cost_per_kg:"",medicine_costs:"",miscellaneous_costs:"",cost_variations:"",sawdust_bedding_cost:"",chicken_bedding_sale_revenue:"",chicks_died:""}),[n,r]=(0,a.useState)([{quantity:"",total_weight_kg:"",age_days:""}]),[l,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(!1),[u,d]=(0,a.useState)(""),[f,p]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[g,y]=(0,a.useState)([]),[b,v]=(0,a.useState)([]),[x,w]=(0,a.useState)([]),[k,S]=(0,a.useState)([]),[_,N]=(0,a.useState)("basic"),[j,E]=(0,a.useState)(!1),[C,P]=(0,a.useState)(!1),[O,T]=(0,a.useState)(!1),[R,L]=(0,a.useState)(null),[z,A]=(0,a.useState)(!1);(0,a.useEffect)((()=>{F(),D(),I(),B(),M(),U()}),[]);const F=async()=>{try{const e=await Rt.get("".concat(zt,"/calculations"));p(e.data)}catch(e){console.error("Error loading history:",e)}},D=async()=>{try{const e=await Rt.get("".concat(zt,"/handlers/names"));h(e.data)}catch(e){console.error("Error loading handlers:",e)}},M=async()=>{try{const e=await Rt.get("".concat(zt,"/handlers"));w(e.data)}catch(e){console.error("Error loading all handlers:",e)}},U=async()=>{try{const e=await Rt.get("".concat(zt,"/admin/sheds"));S(e.data)}catch(e){console.error("Error loading all sheds:",e)}},I=async()=>{try{const e=await Rt.get("".concat(zt,"/sheds"));v(e.data)}catch(e){console.error("Error loading sheds:",e)}},B=async()=>{try{const e=await Rt.get("".concat(zt,"/handlers/performance"));y(e.data)}catch(e){console.error("Error loading handler performance:",e),y([])}},H=e=>{const{name:n,value:r}=e.target;t((e=>c(c({},e),{},{[n]:r})))},q=(e,t,a)=>{const l=[...n];l[e][t]=a,r(l)},V=async e=>{try{const t=(await Rt.get("".concat(zt,"/batches/").concat(e,"/export-pdf"))).data.filename;alert("PDF regenerated successfully: ".concat(t)),(e=>{const t="".concat(zt,"/export/").concat(e),n=document.createElement("a");n.href=t,n.download=e,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)})(t)}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Error regenerating PDF";alert(e)}},$=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),W=e=>{let{costBreakdown:t}=e;const n=[{name:"Chicks",value:t.chick_cost_percent,color:"#3B82F6"},{name:"Pre-starter Feed",value:t.pre_starter_cost_percent,color:"#10B981"},{name:"Starter Feed",value:t.starter_cost_percent,color:"#F59E0B"},{name:"Growth Feed",value:t.growth_cost_percent,color:"#EF4444"},{name:"Final Feed",value:t.final_cost_percent,color:"#8B5CF6"},{name:"Medicine",value:t.medicine_cost_percent,color:"#06B6D4"},{name:"Miscellaneous",value:t.miscellaneous_cost_percent,color:"#84CC16"},{name:"Cost Variations",value:t.cost_variations_percent,color:"#F97316"}].filter((e=>e.value>0));return(0,Lt.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Cost Breakdown"}),(0,Lt.jsx)("div",{className:"space-y-2",children:n.map(((e,t)=>(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{className:"flex items-center",children:[(0,Lt.jsx)("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:e.color}}),(0,Lt.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]}),(0,Lt.jsxs)("div",{className:"flex items-center",children:[(0,Lt.jsx)("div",{className:"h-2 bg-gray-200 rounded mr-2",style:{width:"100px"},children:(0,Lt.jsx)("div",{className:"h-2 rounded",style:{width:"".concat(e.value,"%"),backgroundColor:e.color}})}),(0,Lt.jsxs)("span",{className:"text-sm font-semibold text-gray-800 w-12 text-right",children:[e.value,"%"]})]})]},t)))})]})},Q=()=>j?0===g.length?(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-8",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Handler Performance Ranking"}),(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No performance data available. Complete some batches to see handler rankings."})]}):(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-8",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Handler Performance Ranking"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"min-w-full table-auto",children:[(0,Lt.jsx)("thead",{className:"bg-gray-50",children:(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Handler"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Batches"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg FCR"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Mortality %"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Daily Gain"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Score"})]})}),(0,Lt.jsx)("tbody",{className:"divide-y divide-gray-200",children:g.map(((e,t)=>(0,Lt.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(0===t?"bg-green-50":""),children:[(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm font-semibold",children:[0===t?"\ud83c\udfc6":""," #",t+1]}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:e.handler_name}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:e.total_batches}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.avg_feed_conversion_ratio}),(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.avg_mortality_rate,"%"]}),(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.avg_daily_weight_gain," kg"]}),(0,Lt.jsx)("td",{className:"px-4 py-2",children:(0,Lt.jsxs)("div",{className:"flex items-center",children:[(0,Lt.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:(0,Lt.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(e.performance_score,"%")}})}),(0,Lt.jsx)("span",{className:"text-sm font-semibold",children:e.performance_score})]})})]},t)))})]})})]}):null,K=()=>{const[e,t]=(0,a.useState)({name:"",email:"",phone:"",notes:""}),[n,r]=(0,a.useState)({number:"",capacity:"",location:"",status:"active",notes:""}),[l,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(null),u=async(e,t)=>{await(async(e,t)=>{try{await Rt.put("".concat(zt,"/handlers/").concat(e),t),M(),D()}catch(a){var n,r;alert((null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Error updating handler")}})(e,t),o(null)},d=async(e,t)=>{await(async(e,t)=>{try{await Rt.put("".concat(zt,"/admin/sheds/").concat(e),t),U(),I()}catch(a){var n,r;alert((null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Error updating shed")}})(e,t),s(null)};return(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-8",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Farm Administration"}),(0,Lt.jsxs)("div",{className:"mb-8",children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"\ud83d\udc68\u200d\ud83c\udf3e Handler Management"}),(0,Lt.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),e.name.trim()&&(await(async e=>{try{await Rt.post("".concat(zt,"/handlers"),e),M(),D()}catch(r){var t,n;alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Error creating handler")}})({name:e.name.trim(),email:e.email.trim()||null,phone:e.phone.trim()||null,notes:e.notes.trim()||null}),t({name:"",email:"",phone:"",notes:""}))},className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Lt.jsx)("h4",{className:"font-semibold mb-3",children:"Add New Handler"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsx)("input",{type:"text",placeholder:"Handler Name *",value:e.name,onChange:n=>t(c(c({},e),{},{name:n.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,Lt.jsx)("input",{type:"email",placeholder:"Email (optional)",value:e.email,onChange:n=>t(c(c({},e),{},{email:n.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("input",{type:"tel",placeholder:"Phone (optional)",value:e.phone,onChange:n=>t(c(c({},e),{},{phone:n.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("input",{type:"text",placeholder:"Notes (optional)",value:e.notes,onChange:n=>t(c(c({},e),{},{notes:n.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,Lt.jsx)("button",{type:"submit",className:"mt-3 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700",children:"Add Handler"})]}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"min-w-full table-auto",children:[(0,Lt.jsx)("thead",{className:"bg-gray-50",children:(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,Lt.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.map((e=>(0,Lt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:e.name}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:e.email||"-"}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:e.phone||"-"}),(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm",children:[(0,Lt.jsx)("button",{onClick:()=>o(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),(0,Lt.jsx)("button",{onClick:()=>{window.confirm('Delete handler "'.concat(e.name,'"? This action cannot be undone.'))&&(async e=>{if(console.log("Attempting to delete handler with ID:",e),window.confirm("Are you sure you want to delete this handler?"))try{console.log("Making delete request to:","".concat(zt,"/handlers/").concat(e)),await Rt.delete("".concat(zt,"/handlers/").concat(e)),alert("Handler deleted successfully"),M(),D()}catch(r){var t,n;console.error("Delete error:",r);const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Error deleting handler";alert(e)}})(e.id)},className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},e.id)))})]})}),l&&(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[(0,Lt.jsxs)("h4",{className:"text-lg font-semibold mb-4",children:["Edit Handler: ",l.name]}),(0,Lt.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target);u(l.id,{name:t.get("name"),email:t.get("email")||null,phone:t.get("phone")||null,notes:t.get("notes")||null})},children:[(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsx)("input",{name:"name",type:"text",placeholder:"Handler Name *",defaultValue:l.name,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,Lt.jsx)("input",{name:"email",type:"email",placeholder:"Email (optional)",defaultValue:l.email||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("input",{name:"phone",type:"tel",placeholder:"Phone (optional)",defaultValue:l.phone||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("input",{name:"notes",type:"text",placeholder:"Notes (optional)",defaultValue:l.notes||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,Lt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Lt.jsx)("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700",children:"Update Handler"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>o(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"\ud83c\udfe0 Shed Management"}),(0,Lt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n.number.trim()&&(await(async e=>{try{await Rt.post("".concat(zt,"/admin/sheds"),e),U(),I()}catch(r){var t,n;alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Error creating shed")}})({number:n.number.trim(),capacity:n.capacity?parseInt(n.capacity):null,location:n.location.trim()||null,status:n.status,notes:n.notes.trim()||null}),r({number:"",capacity:"",location:"",status:"active",notes:""}))},className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Lt.jsx)("h4",{className:"font-semibold mb-3",children:"Add New Shed"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsx)("input",{type:"text",placeholder:"Shed Number *",value:n.number,onChange:e=>r(c(c({},n),{},{number:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,Lt.jsx)("input",{type:"number",placeholder:"Capacity (optional)",value:n.capacity,onChange:e=>r(c(c({},n),{},{capacity:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("input",{type:"text",placeholder:"Location (optional)",value:n.location,onChange:e=>r(c(c({},n),{},{location:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsxs)("select",{value:n.status,onChange:e=>r(c(c({},n),{},{status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,Lt.jsx)("option",{value:"active",children:"Active"}),(0,Lt.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,Lt.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,Lt.jsx)("input",{type:"text",placeholder:"Notes (optional)",value:n.notes,onChange:e=>r(c(c({},n),{},{notes:e.target.value})),className:"w-full mt-4 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("button",{type:"submit",className:"mt-3 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700",children:"Add Shed"})]}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"min-w-full table-auto",children:[(0,Lt.jsx)("thead",{className:"bg-gray-50",children:(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Number"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Capacity"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,Lt.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.map((e=>(0,Lt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:e.number}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:e.capacity||"-"}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:e.location||"-"}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("active"===e.status?"bg-green-100 text-green-800":"maintenance"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm",children:[(0,Lt.jsx)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),(0,Lt.jsx)("button",{onClick:()=>{window.confirm('Delete shed "'.concat(e.number,'"? This action cannot be undone.'))&&(async e=>{if(console.log("Attempting to delete shed with ID:",e),window.confirm("Are you sure you want to delete this shed?"))try{console.log("Making delete request to:","".concat(zt,"/admin/sheds/").concat(e)),await Rt.delete("".concat(zt,"/admin/sheds/").concat(e)),alert("Shed deleted successfully"),U(),I()}catch(r){var t,n;console.error("Delete error:",r);const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Error deleting shed";alert(e)}})(e.id)},className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},e.id)))})]})}),i&&(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[(0,Lt.jsxs)("h4",{className:"text-lg font-semibold mb-4",children:["Edit Shed: ",i.number]}),(0,Lt.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target);d(i.id,{number:t.get("number"),capacity:t.get("capacity")?parseInt(t.get("capacity")):null,location:t.get("location")||null,status:t.get("status"),notes:t.get("notes")||null})},children:[(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsx)("input",{name:"number",type:"text",placeholder:"Shed Number *",defaultValue:i.number,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,Lt.jsx)("input",{name:"capacity",type:"number",placeholder:"Capacity (optional)",defaultValue:i.capacity||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsx)("input",{name:"location",type:"text",placeholder:"Location (optional)",defaultValue:i.location||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,Lt.jsxs)("select",{name:"status",defaultValue:i.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,Lt.jsx)("option",{value:"active",children:"Active"}),(0,Lt.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,Lt.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,Lt.jsx)("input",{name:"notes",type:"text",placeholder:"Notes (optional)",defaultValue:i.notes||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,Lt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Lt.jsx)("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700",children:"Update Shed"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>s(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})})]})]})},G=()=>{const[e,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[i,s]=(0,a.useState)(""),u=f.filter((t=>{const n=t.batch_id.toLowerCase().includes(e.toLowerCase())||t.handler_name.toLowerCase().includes(e.toLowerCase())||t.shed_number.toLowerCase().includes(e.toLowerCase()),r=!l||t.handler_name===l,a=!i||t.shed_number===i;return n&&r&&a}));return(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-8",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"\ud83d\udccb Batch Management"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Batches"}),(0,Lt.jsx)("input",{type:"text",placeholder:"Search by batch ID, handler, or shed...",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Handler"}),(0,Lt.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,Lt.jsx)("option",{value:"",children:"All Handlers"}),m.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Shed"}),(0,Lt.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,Lt.jsx)("option",{value:"",children:"All Sheds"}),b.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,Lt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Lt.jsxs)("table",{className:"min-w-full table-auto",children:[(0,Lt.jsx)("thead",{className:"bg-gray-50",children:(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch ID"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Shed"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Handler"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Chicks"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"FCR"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mortality %"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost/kg"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,Lt.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map(((e,n)=>(0,Lt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm font-mono font-semibold text-gray-900",children:e.batch_id}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(e.date).toLocaleDateString()}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.shed_number}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.handler_name}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.initial_chicks.toLocaleString()}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.fcr}),(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.mortality_percent,"%"]}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:$(e.cost_per_kg)}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,Lt.jsxs)("div",{className:"flex space-x-1",children:[(0,Lt.jsx)("button",{onClick:()=>(async e=>{try{const n=await Rt.get("".concat(zt,"/batches/").concat(e));L(n.data),A(!0);const a=n.data;t({batch_id:a.input_data.batch_id,shed_number:a.input_data.shed_number,handler_name:a.input_data.handler_name,initial_chicks:a.input_data.initial_chicks.toString(),chick_cost_per_unit:a.input_data.chick_cost_per_unit.toString(),pre_starter_consumption:a.input_data.pre_starter_feed.consumption_kg.toString(),pre_starter_cost_per_kg:a.input_data.pre_starter_feed.cost_per_kg.toString(),starter_consumption:a.input_data.starter_feed.consumption_kg.toString(),starter_cost_per_kg:a.input_data.starter_feed.cost_per_kg.toString(),growth_consumption:a.input_data.growth_feed.consumption_kg.toString(),growth_cost_per_kg:a.input_data.growth_feed.cost_per_kg.toString(),final_consumption:a.input_data.final_feed.consumption_kg.toString(),final_cost_per_kg:a.input_data.final_feed.cost_per_kg.toString(),medicine_costs:a.input_data.medicine_costs.toString(),miscellaneous_costs:a.input_data.miscellaneous_costs.toString(),cost_variations:a.input_data.cost_variations.toString(),sawdust_bedding_cost:a.input_data.sawdust_bedding_cost.toString(),chicken_bedding_sale_revenue:a.input_data.chicken_bedding_sale_revenue.toString(),chicks_died:a.input_data.chicks_died.toString()}),r(a.input_data.removal_batches.map((e=>({quantity:e.quantity.toString(),total_weight_kg:e.total_weight_kg.toString(),age_days:e.age_days.toString()})))),N("basic"),T(!1)}catch(l){var n,a;alert("Error loading batch details: "+((null===(n=l.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||l.message))}})(e.batch_id),className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",title:"View/Edit Batch",children:"\ud83d\udcdd Edit"}),(0,Lt.jsx)("button",{onClick:()=>V(e.batch_id),className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700",title:"Generate & Download PDF",children:"\ud83d\udda8\ufe0f Print"}),(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(console.log("Attempting to delete batch with ID:",e),window.confirm("Are you sure you want to delete this batch? This action cannot be undone."))try{console.log("Making delete request to:","".concat(zt,"/batches/").concat(e)),await Rt.delete("".concat(zt,"/batches/").concat(e)),alert("Batch deleted successfully"),F()}catch(r){var t,n;console.error("Delete error:",r);const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Error deleting batch";alert(e)}})(e.batch_id),className:"bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700",title:"Delete Batch",children:"\ud83d\uddd1\ufe0f Delete"})]})})]},n)))})]}),0===u.length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:e||l||i?"No batches match your search criteria.":"No batches found. Create your first batch to get started."})]}),z&&(0,Lt.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Lt.jsxs)("p",{className:"text-blue-800",children:["\ud83d\udcdd ",(0,Lt.jsx)("strong",{children:"Editing Mode:"}),' Batch data has been loaded into the form. Make your changes and click "Calculate Enhanced Metrics" to update the batch.']})})]})};return(0,Lt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:(0,Lt.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-8",children:[(0,Lt.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"\ud83d\udc14 Enhanced Broiler Chicken Cost Calculator"}),(0,Lt.jsx)("p",{className:"text-lg text-gray-600",children:"Professional poultry production cost analysis with detailed feed phases and removal tracking"})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,Lt.jsxs)("div",{className:"xl:col-span-2 bg-white rounded-xl shadow-lg p-6",children:[u&&(0,Lt.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),(0,Lt.jsxs)("div",{className:"flex border-b mb-6 overflow-x-auto",children:[(0,Lt.jsx)("button",{onClick:()=>N("basic"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("basic"===_?"border-b-2 border-green-500 text-green-600":"text-gray-500"),children:"Basic Info"}),(0,Lt.jsx)("button",{onClick:()=>N("feed"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("feed"===_?"border-b-2 border-green-500 text-green-600":"text-gray-500"),children:"Feed Phases"}),(0,Lt.jsx)("button",{onClick:()=>N("costs"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("costs"===_?"border-b-2 border-green-500 text-green-600":"text-gray-500"),children:"Additional Costs"}),(0,Lt.jsx)("button",{onClick:()=>N("removals"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("removals"===_?"border-b-2 border-green-500 text-green-600":"text-gray-500"),children:"Removals"}),(0,Lt.jsx)("button",{onClick:()=>E(!j),className:"px-4 py-2 font-medium whitespace-nowrap ".concat(j?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"),children:"Performance"}),(0,Lt.jsx)("button",{onClick:()=>P(!C),className:"px-4 py-2 font-medium whitespace-nowrap ".concat(C?"border-b-2 border-purple-500 text-purple-600":"text-gray-500"),children:"Admin"}),(0,Lt.jsx)("button",{onClick:()=>T(!O),className:"px-4 py-2 font-medium whitespace-nowrap ".concat(O?"border-b-2 border-orange-500 text-orange-600":"text-gray-500"),children:"Batch Management"})]}),(0,Lt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(!0),d("");try{const t={batch_id:e.batch_id.trim(),shed_number:e.shed_number.trim(),handler_name:e.handler_name.trim(),initial_chicks:parseInt(e.initial_chicks)||0,chick_cost_per_unit:parseFloat(e.chick_cost_per_unit)||0,pre_starter_feed:{consumption_kg:parseFloat(e.pre_starter_consumption)||0,cost_per_kg:parseFloat(e.pre_starter_cost_per_kg)||0},starter_feed:{consumption_kg:parseFloat(e.starter_consumption)||0,cost_per_kg:parseFloat(e.starter_cost_per_kg)||0},growth_feed:{consumption_kg:parseFloat(e.growth_consumption)||0,cost_per_kg:parseFloat(e.growth_cost_per_kg)||0},final_feed:{consumption_kg:parseFloat(e.final_consumption)||0,cost_per_kg:parseFloat(e.final_cost_per_kg)||0},medicine_costs:parseFloat(e.medicine_costs)||0,miscellaneous_costs:parseFloat(e.miscellaneous_costs)||0,cost_variations:parseFloat(e.cost_variations)||0,sawdust_bedding_cost:parseFloat(e.sawdust_bedding_cost)||0,chicken_bedding_sale_revenue:parseFloat(e.chicken_bedding_sale_revenue)||0,chicks_died:parseInt(e.chicks_died)||0,removal_batches:n.filter((e=>e.quantity&&e.total_weight_kg&&e.age_days)).map((e=>({quantity:parseInt(e.quantity)||0,total_weight_kg:parseFloat(e.total_weight_kg)||0,age_days:parseInt(e.age_days)||0})))};if(!t.batch_id)return void d("Batch ID is required");if(!t.shed_number)return void d("Shed number is required");if(!t.handler_name)return void d("Handler name is required");if(0===t.removal_batches.length)return void d("At least one removal batch is required");let r;z?(r=await Rt.put("".concat(zt,"/batches/").concat(t.batch_id),t),A(!1)):r=await Rt.post("".concat(zt,"/calculate"),t),o(r.data),F(),D(),I(),B(),M(),U()}catch(l){var r,a;d((null===(r=l.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"An error occurred during calculation")}finally{s(!1)}},className:"space-y-6",children:["basic"===_&&(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Batch & Production Data"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch ID *"}),(0,Lt.jsx)("input",{type:"text",name:"batch_id",value:e.batch_id,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., BATCH-2024-001",required:!0})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shed Number *"}),(0,Lt.jsx)("input",{type:"text",name:"shed_number",value:e.shed_number,onChange:H,list:"sheds-list",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., SHED-A1",required:!0}),(0,Lt.jsx)("datalist",{id:"sheds-list",children:b.map((e=>(0,Lt.jsx)("option",{value:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Handler Name *"}),(0,Lt.jsx)("input",{type:"text",name:"handler_name",value:e.handler_name,onChange:H,list:"handlers-list",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., John Smith",required:!0}),(0,Lt.jsx)("datalist",{id:"handlers-list",children:m.map((e=>(0,Lt.jsx)("option",{value:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Number of Chicks *"}),(0,Lt.jsx)("input",{type:"number",name:"initial_chicks",value:e.initial_chicks,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 10000",required:!0})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Chick ($) *"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"chick_cost_per_unit",value:e.chick_cost_per_unit,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 0.45",required:!0})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Chicks Died *"}),(0,Lt.jsx)("input",{type:"number",name:"chicks_died",value:e.chicks_died,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 250",required:!0})]})]})]}),"feed"===_&&(0,Lt.jsxs)("div",{className:"space-y-6",children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Feed Phases"}),(0,Lt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-blue-800 mb-3",children:"Pre-starter Feed (0-10 days)"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumption (kg)"}),(0,Lt.jsx)("input",{type:"number",step:"0.1",name:"pre_starter_consumption",value:e.pre_starter_consumption,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 500"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"pre_starter_cost_per_kg",value:e.pre_starter_cost_per_kg,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 0.65"})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-green-800 mb-3",children:"Starter Feed (10-24 days)"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumption (kg)"}),(0,Lt.jsx)("input",{type:"number",step:"0.1",name:"starter_consumption",value:e.starter_consumption,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 2500"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"starter_cost_per_kg",value:e.starter_cost_per_kg,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 0.45"})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-yellow-800 mb-3",children:"Growth Feed (24-35 days)"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumption (kg)"}),(0,Lt.jsx)("input",{type:"number",step:"0.1",name:"growth_consumption",value:e.growth_consumption,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"e.g., 8000"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"growth_cost_per_kg",value:e.growth_cost_per_kg,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"e.g., 0.40"})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-purple-800 mb-3",children:"Final Feed (35+ days)"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumption (kg)"}),(0,Lt.jsx)("input",{type:"number",step:"0.1",name:"final_consumption",value:e.final_consumption,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., 12000"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per kg ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"final_cost_per_kg",value:e.final_cost_per_kg,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., 0.35"})]})]})]})]}),"costs"===_&&(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Additional Costs & Revenue"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medicine & Vaccine Costs ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"medicine_costs",value:e.medicine_costs,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 800"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Miscellaneous Costs ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"miscellaneous_costs",value:e.miscellaneous_costs,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 500"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sawdust Bedding Cost ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"sawdust_bedding_cost",value:e.sawdust_bedding_cost,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 400"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chicken Bedding Sale Revenue ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"chicken_bedding_sale_revenue",value:e.chicken_bedding_sale_revenue,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 600"})]}),(0,Lt.jsxs)("div",{className:"md:col-span-2",children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Variations ($)"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",name:"cost_variations",value:e.cost_variations,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 300"}),(0,Lt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Additional cost adjustments or variations"})]})]})]}),"removals"===_&&(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Removal Batches (35-50 days)"}),(0,Lt.jsxs)("button",{type:"button",onClick:()=>{n.length<15&&r([...n,{quantity:"",total_weight_kg:"",age_days:""}])},disabled:n.length>=15,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50",children:["Add Batch (",n.length,"/15)"]})]}),(0,Lt.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:n.map(((e,t)=>(0,Lt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Lt.jsxs)("h4",{className:"font-medium text-gray-700",children:["Batch ",t+1]}),n.length>1&&(0,Lt.jsx)("button",{type:"button",onClick:()=>(e=>{if(n.length>1){const t=n.filter(((t,n)=>n!==e));r(t)}})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity Removed"}),(0,Lt.jsx)("input",{type:"number",value:e.quantity,onChange:e=>q(t,"quantity",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 2000"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Weight (kg)"}),(0,Lt.jsx)("input",{type:"number",step:"0.1",value:e.total_weight_kg,onChange:e=>q(t,"total_weight_kg",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., 4800"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age (days)"}),(0,Lt.jsx)("input",{type:"number",value:e.age_days,onChange:e=>q(t,"age_days",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"35-50",min:"35",max:"60"})]})]})]},t)))})]}),(0,Lt.jsxs)("div",{className:"flex space-x-4 pt-6 border-t",children:[(0,Lt.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 font-medium",children:i?"Processing...":z?"\ud83d\udd04 Update Batch":"\ud83d\udcca Calculate Enhanced Metrics"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>{t({batch_id:"",shed_number:"",handler_name:"",initial_chicks:"",chick_cost_per_unit:"",pre_starter_consumption:"",pre_starter_cost_per_kg:"",starter_consumption:"",starter_cost_per_kg:"",growth_consumption:"",growth_cost_per_kg:"",final_consumption:"",final_cost_per_kg:"",medicine_costs:"",miscellaneous_costs:"",cost_variations:"",sawdust_bedding_cost:"",chicken_bedding_sale_revenue:"",chicks_died:""}),r([{quantity:"",total_weight_kg:"",age_days:""}]),o(null),d(""),A(!1),L(null)},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 font-medium",children:"Reset"})]})]})]}),l&&(0,Lt.jsxs)("div",{className:"xl:col-span-1 space-y-6",children:[(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Key Performance Metrics"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,Lt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-sm font-medium text-blue-600",children:"Feed Conversion Ratio"}),(0,Lt.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:l.calculation.feed_conversion_ratio})]}),(0,Lt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-sm font-medium text-red-600",children:"Mortality Rate"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-red-800",children:[l.calculation.mortality_rate_percent,"%"]})]}),(0,Lt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-sm font-medium text-green-600",children:"Net Cost per kg"}),(0,Lt.jsx)("p",{className:"text-2xl font-bold text-green-800",children:$(l.calculation.net_cost_per_kg)}),(0,Lt.jsx)("p",{className:"text-xs text-green-600",children:"After bedding revenue"})]}),(0,Lt.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-sm font-medium text-purple-600",children:"Weighted Avg Age"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-purple-800",children:[l.calculation.weighted_average_age," days"]})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-sm font-medium text-yellow-600",children:"Daily Weight Gain"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-yellow-800",children:[l.calculation.daily_weight_gain," kg"]})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Lt.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Production Summary"}),(0,Lt.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Batch ID:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:l.calculation.input_data.batch_id})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Shed:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:l.calculation.input_data.shed_number})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Handler:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:l.calculation.input_data.handler_name})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Initial Chicks:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:l.calculation.input_data.initial_chicks.toLocaleString()})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Surviving Chicks:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:l.calculation.surviving_chicks.toLocaleString()})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Removed Chicks:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:l.calculation.removed_chicks.toLocaleString()})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Missing Chicks:"}),(0,Lt.jsx)("span",{className:"font-semibold ".concat(l.calculation.missing_chicks>0?"text-red-600":"text-green-600"),children:l.calculation.missing_chicks.toLocaleString()})]}),(0,Lt.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Total Weight Produced:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[l.calculation.total_weight_produced_kg.toLocaleString()," kg"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{className:"text-gray-600",children:"Total Feed Consumed:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[l.calculation.total_feed_consumed_kg.toLocaleString()," kg"]})]}),l.calculation.total_revenue>0&&(0,Lt.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,Lt.jsx)("span",{children:"Bedding Revenue:"}),(0,Lt.jsx)("span",{className:"font-semibold",children:$(l.calculation.total_revenue)})]})]})]}),(0,Lt.jsx)(W,{costBreakdown:l.calculation.cost_breakdown})]})]}),j&&(0,Lt.jsx)(Q,{}),C&&(0,Lt.jsx)(K,{}),O&&(0,Lt.jsx)(G,{}),l&&(0,Lt.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Financial Breakdown"}),(0,Lt.jsxs)("div",{className:"space-y-3",children:[(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Chick Cost:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.chick_cost)," (",l.calculation.cost_breakdown.chick_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Pre-starter Feed:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.pre_starter_cost)," (",l.calculation.cost_breakdown.pre_starter_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Starter Feed:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.starter_cost)," (",l.calculation.cost_breakdown.starter_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Growth Feed:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.growth_cost)," (",l.calculation.cost_breakdown.growth_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Final Feed:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.final_cost)," (",l.calculation.cost_breakdown.final_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Medicine:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.medicine_cost)," (",l.calculation.cost_breakdown.medicine_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Miscellaneous:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.miscellaneous_cost)," (",l.calculation.cost_breakdown.miscellaneous_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Cost Variations:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.cost_variations)," (",l.calculation.cost_breakdown.cost_variations_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between",children:[(0,Lt.jsx)("span",{children:"Sawdust Bedding:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:[$(l.calculation.cost_breakdown.sawdust_bedding_cost)," (",l.calculation.cost_breakdown.sawdust_bedding_cost_percent,"%)"]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between border-t pt-2 font-bold text-lg",children:[(0,Lt.jsx)("span",{children:"Total Cost:"}),(0,Lt.jsx)("span",{children:$(l.calculation.total_cost)})]}),l.calculation.total_revenue>0&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,Lt.jsx)("span",{children:"Bedding Revenue:"}),(0,Lt.jsxs)("span",{className:"font-semibold",children:["-",$(l.calculation.total_revenue)]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between border-t pt-2 font-bold text-xl text-green-600",children:[(0,Lt.jsx)("span",{children:"Net Cost:"}),(0,Lt.jsx)("span",{children:$(l.calculation.total_cost-l.calculation.total_revenue)})]})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Business Insights & Reports"}),(0,Lt.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"\ud83d\udcc4 Batch Reports Available"}),(0,Lt.jsx)("div",{className:"flex flex-wrap gap-2",children:l.insights.filter((e=>e.includes("exported as:"))).map(((e,t)=>{const n=e.split("as: ")[1].trim(),r=n.endsWith(".pdf");return(0,Lt.jsx)("button",{onClick:()=>window.open("".concat(zt,"/export/").concat(n),"_blank"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium ".concat(r?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"),children:r?"\ud83d\udcc4 Download PDF Report":"\ud83d\udcca Download JSON Data"},t)}))})]}),(0,Lt.jsx)("div",{className:"space-y-3",children:l.insights.filter((e=>!e.includes("exported as:"))).map(((e,t)=>(0,Lt.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg text-sm",children:e},t)))})]})]}),f.length>0&&(0,Lt.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Recent Calculations"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"min-w-full table-auto",children:[(0,Lt.jsx)("thead",{className:"bg-gray-50",children:(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch ID"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Shed"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Handler"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Chicks"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"FCR"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mortality %"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Age"}),(0,Lt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost/kg"})]})}),(0,Lt.jsx)("tbody",{className:"divide-y divide-gray-200",children:f.slice(0,10).map(((e,t)=>(0,Lt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(e.date).toLocaleDateString()}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm font-mono text-gray-900",children:e.batch_id}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.shed_number}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.handler_name}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.initial_chicks.toLocaleString()}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.fcr}),(0,Lt.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.mortality_percent,"%"]}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:"N/A"}),(0,Lt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:$(e.cost_per_kg)})]},t)))})]})})]})]})})};l.createRoot(document.getElementById("root")).render((0,Lt.jsx)(a.StrictMode,{children:(0,Lt.jsx)(At,{})}))})();
//# sourceMappingURL=main.d7e7565b.js.map